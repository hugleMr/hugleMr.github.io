window.__require=function t(e,n,i){function s(a,c){if(!n[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+a+"'")}}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){return s(e[a][1][t]||t)},h,h.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<i.length;a++)s(i[a]);return s}({AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"a7ee7i/deJD15xGqOmznJ4r","AudioManager");var i=cc.Class({extends:cc.Component,properties:{boom:{default:null,url:cc.AudioClip},buttonSound:{default:null,url:cc.AudioClip},select_word:{default:null,url:cc.AudioClip},hint_random:{default:null,url:cc.AudioClip},hint_select:{default:null,url:cc.AudioClip},hint_solve:{default:null,url:cc.AudioClip},time_out:{default:null,url:cc.AudioClip},correct:{default:null,url:cc.AudioClip},fail:{default:null,url:cc.AudioClip},gameover:{default:null,url:cc.AudioClip}},statics:{instance:null},playButton:function(){this.play(this.buttonSound)},playBoom:function(){this.play(this.boom)},playSelectWord:function(){this.play(this.select_word)},playHintRandom:function(){this.play(this.hint_random)},playHintSelect:function(){this.play(this.hint_select)},playHintSolve:function(){this.play(this.hint_solve)},playTimeOut:function(){this.soundCountDown=this.play(this.time_out)},playCorrect:function(){this.play(this.correct)},playFail:function(){this.play(this.fail)},playGameOver:function(){this.play(this.gameover)},pauseCountDown:function(){this.isPlaying(this.soundCountDown)?(this.pause(this.soundCountDown),console.log("SOUND : true")):console.log("SOUND : false")},resumeCountDown:function(){this.isPaused(this.soundCountDown)&&this.resume(this.soundCountDown)},stopCountDown:function(){(this.isPlaying(this.soundCountDown)||this.isPaused(this.soundCountDown))&&this.stop(this.soundCountDown)},playMusic:function(t){t&&this.enableSound&&cc.audioEngine.playMusic(t,!1)},play:function(t){if(t&&this.enableSound)return cc.audioEngine.play(t,!1,1)},isPlaying:function(t){return console.log("state : ",cc.audioEngine.getState(t)),cc.audioEngine.getState(t)==cc.audioEngine.AudioState.PLAYING},isPaused:function(t){return cc.audioEngine.getState(t)==cc.audioEngine.AudioState.PAUSED},pause:function(t){cc.audioEngine.pause(t)},resume:function(t){cc.audioEngine.resume(t)},stop:function(t){cc.audioEngine.stop(t)},onLoad:function(){i.instance=this,this.enableSound=!0}});cc._RF.pop()},{}],Bong:[function(t,e,n){"use strict";cc._RF.push(e,"104d52yNjFGk4zJokNps8Ko","Bong"),cc.Class({extends:cc.Component,properties:{startTime:0,endTime:1,minScale:.2},onLoad:function(){},update:function(t){this.startTime+=t;var e=1-this.startTime/this.endTime;this.node.opacity=0+Math.floor(255*e),this.node.scaleX=this.minScale+e*(1-this.minScale),this.node.scaleY=this.node.scaleX}}),cc._RF.pop()},{}],Common:[function(t,e,n){"use strict";cc._RF.push(e,"60b3efrgYtCnaMD4VEjZcM5","Common");var i={enable:!1,chars_case:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],HINT_TYPE:{TIME_WATCH:0,RANDOM:1,SELECT:2,REMOVE:3,SOLVE:4},HINT_ITEM:{REVEAL:5,SOLVE:40},LEADERBOARD_TYPE:{WORLD:0,FRIEND:1},GAME_STATE:{HINT_RANDOM:0,HINT_SELECT:1,HINT_REMOVE:2,HINT_SOLVE:3,PLAYING:4,GAME_OVER:5},HINT_REWARD_VIDEO:50,TIME_UP:300,TIME_TO_REWARD:300,MAX_CHAR:12,enableWatch:!1,enableBoomTouch:!0,timeToReward:0,hint:0,level:1,entryLevel:0,listPics:[],picConfig:[],isFirstLoad:!0,getEntryPointData:function(){if(this.enable)return FBInstant.getEntryPointData()},setData:function(t,e){this.enable&&FBInstant.player.setDataAsync({hint:t,level:e}).then(FBInstant.player.flushDataAsync).then(function(){console.log("Data updated to FB!")})},getData:function(t){"function"==typeof t&&t({hint:150,level:1}),this.enable&&FBInstant.player.getDataAsync(["hint","level"]).then(function(e){var n=150;void 0!==e.hint&&(n=e.hint)<=0&&(n=0);var i=1;void 0!==e.level&&(i=e.level)<=1&&(i=1),"function"==typeof t&&t({hint:n,level:i})})},attackFriend:function(t){this.enable&&FBInstant.context.chooseAsync().then(function(){"function"==typeof t&&t({contextId:FBInstant.context.getID()})})},getAllUserRank:function(t,e,n){this.enable&&FBInstant.getLeaderboardAsync(window.LEADER_BOARD).then(function(n){return 0==e?n.getEntriesAsync(t,0):1==e?n.getConnectedPlayerEntriesAsync(t,0):void 0}).then(function(t){console.log(" entries : ",t);var e=t.map(function(t){return{rank:t.getRank(),score:t.getScore(),photo:t.getPlayer().getPhoto(),name:t.getPlayer().getName(),id:t.getPlayer().getID()}});"function"==typeof n&&n({result:e})}).catch(function(t){console.log("getAllUserRank failed to : ",t.message)})},getPlatform:function(){if(this.enable)return FBInstant.getPlatform()},getName:function(){if(this.enable)return FBInstant.player.getName().split(" ")[0]},getPhoto:function(){if(this.enable)return FBInstant.player.getPhoto()},getID:function(){if(this.enable)return FBInstant.player.getID()},loadRewardedVideo:function(){this.enable&&window.loadRewardedVideo()},showInterstitialAd:function(){this.enable&&window.showInterstitialAd()},showRewardedVideo:function(t){this.enable&&window.showRewardedVideo(t)},updateScore:function(t,e){if(this.enable){FBInstant.getLeaderboardAsync(window.LEADER_BOARD).then(function(e){return e.setScoreAsync(t)}).then(function(t){var n=t?t.getScore():0;"function"==typeof e&&e({score:n,rank:t.getRank()})}).catch(function(t){console.log(" upload score error : ",t.message)});var n=FBInstant.context.getID();null!=n&&FBInstant.getLeaderboardAsync(window.LEADER_BOARD_CONTEXT+n).then(function(e){return e.setScoreAsync(t)}).then(function(t){console.log("entry : ",t.getScore())}).catch(function(t){console.log(" upload context score error : ",t.message)})}},getUserInfo:function(t){this.enable&&FBInstant.getLeaderboardAsync(window.LEADER_BOARD).then(function(t){return t.getPlayerEntryAsync()}).then(function(e){"function"==typeof t&&t({rank:e.getRank(),score:e.getScore(),name:FBInstant.player.getName(),photo:FBInstant.player.getPhoto()})})},updateContext:function(){this.enable&&window.updateContext()},getConnectedPlayers:function(t,e){if(this.enable)FBInstant.player.getConnectedPlayersAsync(t,0).then(function(t){var n=t.map(function(t){return{id:t.getID(),name:t.getName(),photo:t.getPhoto()}});console.log("players : ",n),"function"==typeof e&&e({result:n})})},shareFriends:function(t,e,n){this.enable&&FBInstant.shareAsync({intent:"INVITE",image:t,title:e||"",message:n||""}).then(function(){console.log("share successfully!")}).catch(function(t){console.log("share fail : ",t.message)})},share:function(e,n){if(this.enable){var i=this;t("SharePic").generate(this.getName(),e,this.getPhoto(),function(t){i.shareFriends(t,n)})}},askOnFacebookTimeLine:function(t,e,n){var i=this;i.askPic(t,function(t){i.shareFriends(t,"Hey! This have "+e+(e>1?" words ":" word ")+n+" letters. Help me !!! :(")})},askFriend:function(t,e){if(this.enable){var n=this;FBInstant.context.createAsync(t).then(function(){console.log("context true : ",FBInstant.context.getID()),n.updateContextToAsk(e)}).catch(function(t){console.log("context false : ",FBInstant.context.getID()),n.updateContextToAsk(e),console.log("switchAsync failed to : ",t.message)})}},sharePassedFriend:function(e,n){if(this.enable){var i=this,s=FBInstant.context.getID();console.log("current_contextID : ",s),console.log("contextId : ",e),null==s||s!=e?FBInstant.context.createAsync(e).then(function(){console.log("context : ",FBInstant.context.getID()),t("SharePic").generate(i.getName(),n,i.getPhoto(),function(t){i.updateContextToShare(t,n)})}).catch(function(t){console.log("switchAsync failed to : ",t.message)}):t("SharePic").generate(i.getName(),n,i.getPhoto(),function(t){i.updateContextToShare(t,n)})}},inviteFriendToAsk:function(t){if(this.enable){var e=this;FBInstant.context.chooseAsync().then(function(){console.log("context : ",FBInstant.context.getID()),e.updateContextToAsk(t)}).catch(function(t){console.log("chooseAsync failed to : ",t.message)})}},inviteFriendToPlay:function(){this.enable&&FBInstant.context.chooseAsync().then(function(){}).catch(function(t){console.log("chooseAsync failed to : ",t.message)})},updateContextToShare:function(t,e){null!=FBInstant.context.getID()&&FBInstant.updateAsync({action:"CUSTOM",cta:"Beat It!",image:t,text:"Hey! "+this.getName()+" just passed you with solved "+e+" questions!",template:"play_turn",data:{},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){console.log("Message was sent successfully")})},updateContextToAsk:function(t){var e=this;t.trimText.length;console.log("context updateContextToAsk : ",FBInstant.context.getID()),e.askPic(t,function(t){FBInstant.updateAsync({action:"CUSTOM",cta:"Solve level "+e.level+"!",image:t,text:"Hey! I'm stuck with this.      Help me out!",template:"play_turn",data:{level:e.level},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){console.log("Message was sent successfully")})})},updateContextToSolved:function(t,e){var n=this,i=(t.trimText.length,!1);console.log("entryLevel: ",n.entryLevel);var s=n.entryLevel;console.log("context updateContextToSolve : ",FBInstant.context.getID()),n.askPic(t,function(t){FBInstant.updateAsync({action:"CUSTOM",cta:"Solve!",image:t,text:"Hey! "+n.getName()+" just solved level "+s+"!   Try it now.",template:"play_turn",data:{},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){console.log("Message was sent successfully"),i||(e(),i=!0)}).catch(function(t){i||(e(),i=!0)})})},initPicsConfig:function(t){var e=this,n=cc.url.raw("resources/pic2word.json");cc.loader.load(n,function(n,i){if(null===n){var s=JSON.stringify(i);e.picConfig=JSON.parse(s),t&&t()}else console.log(n.message)})},getPic:function(t){var e=this.picConfig.json;console.log(e);for(var n=0;n<e.pics.length;n++)if(e.pics[n].order==t)return e.pics[n];return null},getWordPic:function(t){return this.getPic(t).word},getPicsFromCache:function(t,e,n){var s=this,o=this.getPic(t).images.images;e&&this.index;var a=this.getPic(t+1).images.images;this.loadSpriteFrame(o[0].picture,function(t,e){if(1==t){var a=e.spriteFrame;console.log("DONE_1"),s.loadSpriteFrame(o[1].picture,function(t,e){if(1==t){var o=e.spriteFrame;console.log("DONE_1_"),n&&n(1,a,o),s.isFirstLoad&&(s.isFirstLoad=!1,i.hideLoading())}else n(0)})}else n(0)}),s.loadSpriteFrame(a[0].picture,function(t){console.log("DONE_2"),s.loadSpriteFrame(a[1].picture,function(t){console.log("DONE_2_"),console.log("preload nextlevel done!")})})},loadSpriteFrame:function(t,e){cc.loader.loadRes("images/pics-"+t,cc.SpriteFrame,function(t,n){null===t?e&&e(1,{spriteFrame:n}):e&&e(0,{error:t.message})})},showPopup:function(t,e){var n=cc.director.getScene();cc.isValid(n)&&!cc.isValid(n.getChildByName(t))&&cc.loader.loadRes("prefabs/"+t,function(i,s){if(i)console.log("error",i),console.log("L\u1ed7i load popup,th\xeam popup v\xe0o resources.");else{var o=cc.instantiate(s);if(cc.isValid(o)&&cc.isValid(n)&&(o.x=cc.director.getWinSize().width/2,o.y=cc.director.getWinSize().height/2,e)){var a=o.getComponent(t);a.setNamePopup(t),e(a),n.addChild(o,1)}}})},showLoading:function(t){var e=cc.director.getScene();if(cc.isValid(e)&&cc.isValid(e.getChildByName("Canvas").getChildByName("Loading"))){console.log("SHOW LOADING");var n=e.getChildByName("Canvas").getChildByName("Loading");n.active=!0,n.opacity=255,n.getChildByName("label").getComponent(cc.Label).string=t||"Loading ..."}},hideLoading:function(){var t=cc.director.getScene();cc.isValid(t)&&cc.isValid(t.getChildByName("Canvas").getChildByName("Loading"))&&(console.log("HIDE LOADING"),t.getChildByName("Canvas").getChildByName("Loading").active=!1)},closePopup:function(t){var e=cc.director.getScene();cc.isValid(e)&&cc.isValid(e.getChildByName(t))&&e.getChildByName(t).destroy()},formatTime:function(t){var e=Math.floor(t/60),n=Math.floor(t-60*e);return e<10&&(e="0"+e),n<10&&(n="0"+n),e+":"+n},shuffleChar:function(t,e){var n=t,i=[];do{var s=this.chars_case[parseInt(25*Math.random())];n.includes(s)||(n.push(s),i.push(s))}while(n.length<e);return[n.shuffle(),i]},testWhite:function(t){return new RegExp(/^\s$/).test(t.charAt(0))},isWhiteSpace:function(t){for(var e=0;e<t.length;e++)if(this.testWhite(t.charAt(e)))return!0;return!1},askPic:function(t,e){var n=this;t.initShare(function(i){var s=new cc.RenderTexture(897,514);s.begin(),i.setPosition(cc.v2(448.5,257)),i._sgNode.visit(),s.end();var o=document.createElement("canvas"),a=o.getContext("2d");if(o.width=897,o.height=514,cc._renderType===cc.game.RENDER_TYPE_CANVAS){var c=(l=s.getSprite().getTexture()).getHtmlElementObj();a.drawImage(c,0,0)}else if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){var r=gl.createFramebuffer();gl.bindFramebuffer(gl.FRAMEBUFFER,r);var l=s.getSprite().getTexture()._glID;gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,l,0);var h=new Uint8Array(1844232);gl.readPixels(0,0,897,514,gl.RGBA,gl.UNSIGNED_BYTE,h),gl.bindFramebuffer(gl.FRAMEBUFFER,null);for(var u=0;u<514;u++){var d=513-u,g=new Uint8ClampedArray(h.buffer,897*d*4,3588),f=new ImageData(g,897,1);a.putImageData(f,0,u)}}i.destroy(),a.fillStyle="white",a.textAlign="center",a.font="bold 84px HelveticaNeue",t.isHelp?a.fillText(n.entryLevel,151,402):a.fillText(n.level,151,402),(c=new Image).crossOrigin="anonymous",c.src=n.getPhoto(),c.onload=function(){a.save(),a.arc(150,188,83,0,2*Math.PI),a.clip(),a.drawImage(c,67,105,166,166),a.restore(),e(o.toDataURL("image/png"))}})}};Array.prototype.shuffle=function(){for(var t=this.length-1;t>=0;t--){var e=Math.floor(Math.random()*(t+1)),n=this[e];this[e]=this[t],this[t]=n}return this},e.exports=i,cc._RF.pop()},{SharePic:"SharePic"}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"ec8fbZmF8BDBLc8wrFXpYVn","Game");var i=t("Common"),s=t("AudioManager");cc.Class({extends:cc.Component,properties:{bg_suggest:cc.Node,bg_result:cc.Node,itemChar:cc.Prefab,itemResult:cc.Prefab,itemCharShare:cc.Prefab,itemResultShare:cc.Prefab,pic_1:cc.Sprite,pic_2:cc.Sprite,dark_layer:cc.Node,lbl_level:cc.Label,lbl_hint:cc.Label,group_share:cc.Node},onLoad:function(){i.showLoading(),this.preloadPopup()},start:function(){this.initConfig()},preloadPopup:function(){cc.loader.loadResDir("prefabs",function(t,e){console.log("DONE LOAD POPUP"),i.hideLoading()})},initConfig:function(){var t=this;this.maxChar=i.MAX_CHAR,this.listCharSuggest=[],this.listCharResult=[],this.listNewCharResult=[],this.listNewCharSuggest=[],this.isHelp=!1,i.getData(function(e){i.level=e.level,i.hint=e.hint;var n=i.level;i.initPicsConfig(function(){console.log("load pics config...done!"),t.init(n)})})},init:function(e){for(var n=this,i=0;i<this.maxChar;i++){var o=cc.instantiate(this.itemChar),a=o.getComponent(t("ItemChar"));a.init(function(t,e){s.instance.playSelectWord(),n.addListResult(t,e)}),this.listCharSuggest.push(a),this.bg_suggest.addChild(o),a.appear(),a.reset()}for(i=0;i<this.maxChar;i++){var c=cc.instantiate(this.itemResult),r=c.getComponent(t("ItemResult"));r.init(function(t){s.instance.playButton(),n.appearCharSuggest(t)}),this.listCharResult.push(r),this.bg_result.addChild(c),r.appear(),r.disappear(),r.reset()}this.nextLevel(e,this.isHelp)},nextLevel:function(t,e){var n=this;i.getPicsFromCache(t,e,function(i,s,o){1==i?(n.pic_1.spriteFrame=s,n.pic_2.spriteFrame=o,n.initNextLevel(t)):n.nextLevel(t,e),n.dark_layer.active=!1})},initNextLevel:function(t){this.resetListChars(),this.lbl_level.string=t,this.charText=i.getPic(t).word,this.charText=this.charText.toUpperCase(),this.trimText=this.charText.replace(/ /g,"");var e=i.shuffleChar(this.trimText.split(""),this.maxChar),n=e[0];this.otherChar=e[1];for(var s=1.165,o=parseInt(n.length/2),a=parseInt(n.length-o),c=0;c<n.length;c++){var r=this.listCharSuggest[c],l=this.listNewCharSuggest.length;r.updateChar(l,n[l]),c<o?r.setPosition(cc.p((c%o-o/2+.5)*r.node.width*s,.65*r.node.height)):r.setPosition(cc.p((c%a-a/2+.5)*r.node.width*s,.65*-r.node.height)),this.listNewCharSuggest.push(r)}this.arrayCharLogo=this.charText.split(" ");var h=0;s=1.05;for(c=0;c<this.arrayCharLogo.length;c++)for(var u=this.arrayCharLogo[c].split(""),d=0;d<u.length;d++){r=this.listCharResult[h];var g=1,f=parseInt(u.length);9==u.length?g=.9:u.length>=10&&(g=.825),this.arrayCharLogo.length>1?(r.initScale(g),r.setPosition(cc.p((d%f-f/2+.5)*r.node.width*s,0==c?.65*r.node.height:.65*-r.node.height))):(r.initScale(g),r.setPosition(cc.p((d-u.length/2+.5)*r.node.width*g*s,0))),r.initIndex(h),this.listNewCharResult.push(r),h++}},actionRandomHint:function(){this.randomHint(function(){})},actionSolveHint:function(){this.solveHint(function(){})},randomHint:function(t){for(var e=[],n=0;n<this.listNewCharResult.length;n++)this.checkRightCharacter(n)||e.push(n);console.log("listIndex : ",e);var i=parseInt(Math.random()*(e.length-1));if(console.log("random : ",i),e.length>0){var s=e[i];console.log("index : ",s);var o=this.listNewCharResult[s].charIndex;this.listNewCharResult[s].reset(),this.appearCharSuggest(o),this.addListResultByHint(s,t)}},solveHint:function(){this.resetListCharsWhenSolve();for(var t=0;t<this.listNewCharResult.length;t++)this.addListResultByHint(t)},resetListCharsWhenSolve:function(){this.listNewCharResult.forEach(function(t){t.reset()}),this.listNewCharSuggest.forEach(function(t){t.appear()})},addListResultByHint:function(t,e){var n=this.listNewCharResult[t];if(n.isSelected=!0,this.countSelectedResult()<=this.listNewCharResult.length){for(var i=!1,s=this.listNewCharSuggest,o=0;o<s.length;o++)if(s[o].char==this.trimText[t]&&!s[o].isSelected){i=!0;s[o];n.enableTouch=!1,n.highLight(!0),n.updateChar(o,this.trimText[t]),n.zoom(),this.countSelectedResult()==this.listNewCharResult.length&&this.checkResult();break}if(!i)for(o=0;o<this.listNewCharResult.length;o++)if(o!=t&&this.listNewCharResult[o].char==this.trimText[t]&&this.listNewCharResult[o].enableTouch){n.enableTouch=!1,n.highLight(!0),n.updateChar(this.listNewCharResult[o].indexChar,this.trimText[t]),n.zoom(),this.listNewCharResult[o].reset(),this.countSelectedResult()==this.listNewCharResult.length&&this.checkResult();break}}else e&&e()},addListResult:function(t,e){if(t>=0&&t<this.listNewCharSuggest.length){for(var n=this.listNewCharSuggest[t].char,i=-1,s=0;s<this.listNewCharResult.length;s++)if(!this.listNewCharResult[s].isSelected){this.listNewCharResult[s].isSelected=!0,i=s;break}if(this.countSelectedResult()<=this.listNewCharResult.length&&i>=0){var o=this.listNewCharResult[i];o.updateChar(t,n),o.zoom(),this.countSelectedResult()==this.listNewCharResult.length&&this.checkResult(),e.disappear()}}},checkResult:function(){for(var t="",e=0;e<this.listNewCharResult.length;e++)t+=this.listNewCharResult[e].char;this.arrayCharLogo.length>1&&(t=t.slice(0,this.arrayCharLogo[0].length)+" "+t.slice(this.arrayCharLogo[0].length,this.arrayCharLogo[1].length+this.arrayCharLogo[0].length));if(t===this.charText)this.showWin(),this.schedule(function(){s.instance.playCorrect()},.25,!1);else{for(e=0;e<this.listNewCharResult.length;e++)this.listNewCharResult[e].showFail();this.schedule(function(){s.instance.playFail()},.25,!1)}},showWin:function(){var t=this;this.dark_layer.active=!0;for(var e=0;e<t.listNewCharResult.length;e++)t.listNewCharResult[e].showWin();t.isHelp&&(t.node.getChildByName("btn_share_friend").active=!0),this.schedule(function(){t.isHelp||t.gotoNext()},1.2,!1)},shareResultToHelpFriend:function(){var t=this;t.isHelp&&(i.showLoading("Sharing to your friend ..."),t.node.getChildByName("btn_share_friend").active=!1,i.updateContextToSolved(t,function(){i.hideLoading(),t.gotoNext()}))},gotoNext:function(){this.isHelp||i.level++;var t=this;i.updateScore(i.level-1,function(e){t.best_score=e.score,t.rank=e.rank}),this.isHelp=!1,this.nextLevel(i.level,this.isHelp)},countSelectedResult:function(){for(var t=0,e=0;e<this.listNewCharResult.length;e++)this.listNewCharResult[e].isSelected&&t++;return t},appearCharSuggest:function(t){t>=0&&t<this.listNewCharSuggest.length&&this.listNewCharSuggest[t].appear()},checkRightCharacter:function(t){return this.listNewCharResult[t].char==this.trimText[t]},resetListChars:function(){this.listCharSuggest.forEach(function(t){t.reset(),t.disappear()}),this.listCharResult.forEach(function(t){t.reset(),t.highLight(!1),t.disappear()}),this.listNewCharSuggest=[],this.listNewCharResult=[]},showAskFriend:function(){var t=this;i.showPopup("PopupAskFriend",function(e){e.initGame(t),e.appear(function(){})})},initShare:function(t){var e=cc.instantiate(this.group_share);e.parent=cc.director.getScene(),e.getChildByName("bg_share").opacity=255,console.log("trimText : ",this.trimText.length);for(var n=0;n<this.trimText.length;n++){var i=cc.instantiate(this.itemResultShare);e.addChild(i),this.isHelp&&(i.getChildByName("char").getComponent(cc.Label).string=this.trimText[n]);var s=.9,o=parseInt(this.trimText.length);9==this.trimText.length?s=.8:this.trimText.length>=10&&(s=.775),i.scale=s,this.isHelp?i.setPosition(cc.p(158+(n-o/2+.5)*i.width*s*1.1,-80)):i.setPosition(cc.p(158+(n-o/2+.5)*i.width*s*1.1,-28))}if(this.isHelp)t(e);else{var a=parseInt(this.listNewCharSuggest.length/2),c=parseInt(this.listNewCharSuggest.length-a);for(n=0;n<this.listNewCharSuggest.length;n++){var r=cc.instantiate(this.itemCharShare);e.addChild(r),r.getChildByName("char").getComponent(cc.Label).string=this.listNewCharSuggest[n].char;s=.8;r.scale=s,n<a?r.setPosition(cc.p(158+(n%a-a/2+.5)*r.width*s*1.185,.5*r.height-162)):r.setPosition(cc.p(158+(n%c-c/2+.5)*r.width*s*1.185,-162-.4*r.height))}t(e)}}}),cc._RF.pop()},{AudioManager:"AudioManager",Common:"Common",ItemChar:"ItemChar",ItemResult:"ItemResult"}],Image:[function(t,e,n){"use strict";cc._RF.push(e,"caf26bZOLlIoLb9ORz7FXWw","Image"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],ItemAsk:[function(t,e,n){"use strict";cc._RF.push(e,"a21c6HR0cVMoZg2lO/GTgBj","ItemAsk"),cc.Class({extends:cc.Component,properties:{avatar:cc.Sprite,user_name:cc.Label},init:function(t,e,n,i){if(this.callback=i,this.contextId=n,this.user_name.string=t.split(" ")[0],null!=e){var s=this;cc.loader.load({url:e,type:"png"},function(t,e){null==t&&(s.avatar.spriteFrame=new cc.SpriteFrame(e))})}},handleAsk:function(){null!=this.contextId&&(console.log("contextID current : "),console.log("contextID send : ",this.contextId),this.callback(this.contextId))}}),cc._RF.pop()},{}],ItemChar:[function(t,e,n){"use strict";cc._RF.push(e,"ed901e1tMhP3b3joqYifASW","ItemChar"),cc.Class({extends:cc.Component,onLoad:function(){this.index=-1,this.char="",this.isSelected=!1,this.under_bg_char=this.node.getChildByName("under_item_char"),this.bg_char=this.node.getChildByName("bg_char"),this.lbl_char=this.node.getChildByName("char").getComponent(cc.Label)},onEnable:function(){this.node.scale=.01,this.node.runAction(cc.scaleTo(.75,1).easing(cc.easeBackOut()))},init:function(t){this.callback=t},updateChar:function(t,e){this.appear(),this.index=t,this.char=e,this.lbl_char.string=this.char},setPosition:function(t){this.node.setPosition(t)},appear:function(){this.isSelected=!1,this.lbl_char.node.active=!0,this.under_bg_char.active=!0,this.bg_char.active=!0},disappear:function(){this.isSelected=!0,this.lbl_char.node.active=!1,this.bg_char.active=!1},reset:function(){this.index=-1,this.char="",this.under_bg_char.active=!1,this.lbl_char.string=this.char,this.disappear()},touch:function(){this.callback(this.index,this)},destroyChar:function(){this.lbl_char.string="",this.bg_char.active=!1},onFinished:function(){this.disappear()}}),cc._RF.pop()},{}],ItemResult:[function(t,e,n){"use strict";cc._RF.push(e,"ddc40BRQoRD6LZ1P15FZepu","ItemResult"),cc.Class({extends:cc.Component,properties:{bongPrefab:cc.Prefab,bg_frames:[cc.SpriteFrame]},onLoad:function(){this.index=-1,this.charIndex=-1,this.scaleConfig=1,this.char="",this.isSelected=!1,this.enableTouch=!0,this.bg_result=this.node.getChildByName("bg_result"),this.lbl_char=this.bg_result.getChildByName("char").getComponent(cc.Label)},onEnable:function(){this.node.scale=.01,this.node.runAction(cc.scaleTo(.75,this.scaleConfig).easing(cc.easeBackOut()))},zoom:function(){this.node.zIndex=20,this.node.runAction(cc.sequence(cc.scaleTo(.15,1.2).easing(cc.easeBackOut()),cc.scaleTo(.05,this.scaleConfig),cc.callFunc(function(){this.node.zIndex=1}.bind(this))))},init:function(t){this.callback=t},initScale:function(t){this.scaleConfig=t},initSelectLetter:function(t){this.callBackSelectLetter=t},initIndex:function(t){this.appear(),this.index=t},setPosition:function(t){this.node.setPosition(t)},updateChar:function(t,e){this.bg_result.active=!0,this.bg_result.stopAllActions(),this.bg_result.color=cc.Color.BLACK.fromHEX("#ffffff"),this.charIndex=t,this.char=e,this.lbl_char.string=this.char},highLight:function(t){this.node.getComponent(cc.Sprite).spriteFrame=this.bg_frames[t?1:0]},showWin:function(){this.toBong(0,0)},disappear:function(){this.node.active=!1},appear:function(){this.node.active=!0},showFail:function(){var t=cc.Color.BLACK.fromHEX("#ffffff"),e=cc.Color.BLACK.fromHEX("#DB1010"),n=cc.sequence(cc.tintTo(.1,e.getR(),e.getG(),e.getB()),cc.tintTo(.2,t.getR(),t.getG(),t.getB()));this.bg_result.runAction(cc.repeat(n,3))},reset:function(){this.node.active&&(this.char="",this.enableTouch=!0,this.isSelected=!1,this.lbl_char.string=this.char,this.bg_result.active=!1)},touchToSelectLetter:function(){this.callBackSelectLetter(this.index)},touch:function(){this.enableTouch&&(this.reset(),this.callback(this.charIndex))},createBong:function(t,e){var n=cc.instantiate(this.bongPrefab);return this.node.addChild(n),n.setPosition(cc.p(t,e)),this.bongDestroy(n),n},toBong:function(t,e){for(var n=parseInt(5*Math.random()+5),i=0;i<n;i++){var s=80*Math.random()+80,o=360*Math.random(),a=s*Math.cos(o),c=s*Math.sin(o),r=cc.moveBy(1,cc.p(a,-c)).easing(cc.easeCubicActionOut());cc.scaleBy(1,.2,.2);this.createBong(t,e).runAction(r)}},bongDestroy:function(t){var e=300*Math.random()+1e3*t.getComponent("Bong").endTime;setTimeout(function(){t.destroy()},e)}}),cc._RF.pop()},{}],Loading:[function(t,e,n){"use strict";cc._RF.push(e,"da8e6ZgvB9H065Xi8v9FH0z","Loading"),cc.Class({extends:cc.Component,properties:{darkSprite:cc.Sprite},onLoad:function(){this.node.on("touchstart",function(t){return!0},this.darkSprite)}}),cc._RF.pop()},{}],PopupAskFriend:[function(t,e,n){"use strict";cc._RF.push(e,"5d9beHk+hxJ9pe9Oxy3rsog","PopupAskFriend");var i=t("Common");cc.Class({extends:t("Popup"),properties:{content:cc.Node,itemAsk:cc.Prefab},initGame:function(t){this.game=t,this.init()},init:function(){var t=this;this.showLoading(),i.getConnectedPlayers(10,function(e){for(var n=e.result,s=n.length>10?10:n.length,o=0,a=0;a<s;a++){var c=cc.instantiate(t.itemAsk);c.getComponent("ItemAsk").init(n[a].name,n[a].photo,n[a].id,function(e){i.askFriend(e,t.game)});var r=c.getComponent("ItemAsk").node.height;console.log("height : ",r),c.setPositionY(1.1*-r*(a+.07)),o+=1.1*c.getComponent("ItemAsk").node.height,t.content.addChild(c)}t.hideLoading(),t.content.height=o})},inviteFriend:function(){i.inviteFriendToAsk(this.game)}}),cc._RF.pop()},{Common:"Common",Popup:"Popup"}],Popup:[function(t,e,n){"use strict";cc._RF.push(e,"f69ebZ2KlBA8pkzOS9nn6Ni","Popup");var i=t("Common"),s=t("AudioManager");cc.Class({extends:cc.Component,properties:{bg_dark:cc.Sprite,background:cc.Sprite,loading:cc.Node,btn_close:cc.Button},onLoad:function(){this.node.on("touchstart",function(t){return!0},this.bg_dark)},disappear:function(){var t=this.name;s.instance.playButton();var e=this,n=cc.callFunc(function(){null!=e.callbackClose&&e.callbackClose(),i.closePopup(t)},this);this.bg_dark.node.runAction(cc.fadeOut(.05));var o=cc.scaleTo(.1,.1).easing(cc.easeBackIn()),a=cc.fadeOut(.1),c=cc.spawn(o,a);this.background.node.runAction(cc.sequence(c,n))},showLoading:function(){this.deltaTime=0,this.startLoading=!1,this.loading.setOpacity(0),this.loading.rotation=0},hideLoading:function(){this.deltaTime=0,this.startLoading=!0,this.loading.stopAllActions(),this.loading.setOpacity(0),this.loading.rotation=0},update:function(t){if(!this.startLoading&&(this.deltaTime+=t,this.deltaTime>.25)){this.startLoading=!0,this.loading.setOpacity(255);var e=cc.repeatForever(cc.rotateBy(1,360));this.loading.runAction(e)}},setNamePopup:function(t){this.name=t},appear:function(t){this.callbackClose=t;var e=this.background,n=this;this.node.on("touchstart",function(t,i){var s=e.node.convertToNodeSpace(t.getLocation()),o=e.spriteFrame.getRect();return!cc.rectContainsPoint(o,s)&&(n.disappear(),!0)},e),this.bg_dark.node.runAction(cc.fadeTo(.15,220)),this.background.node.setScale(.2);var i=cc.scaleTo(.4,1).easing(cc.easeBackOut());this.background.node.runAction(cc.sequence(i,cc.callFunc(function(){},this)))}}),cc._RF.pop()},{AudioManager:"AudioManager",Common:"Common"}],Rotate:[function(t,e,n){"use strict";cc._RF.push(e,"8dd57DsRIRJqqg0dZUX/t2Q","Rotate"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var t=cc.rotateBy(1,360);this.node.runAction(cc.repeatForever(t))},update:function(t){}}),cc._RF.pop()},{}],SharePic:[function(t,e,n){"use strict";cc._RF.push(e,"b49ebK2NcRIhZn140RfrItS","SharePic");var i={generate:function(t,e,n,i){this.imgList={},this.name=t.split(" ")[0],this.score=e,this.loaderList=0,this.callback=i,this.imgLoader(n,"avatar"),this.imgLoader("./res/raw-assets/resources/share_pic.jpg","bg")},imgLoader:function(t,e){var n=this,i=new Image;i.crossOrigin="anonymous",i.src=t,this.loaderList+=1,i.onload=function(){n.imgList[e]=i,n.loadCallback()}},loadCallback:function(){this.loaderList-=1,0===this.loaderList&&this.callback(this.makePic())},makePic:function(){var t=document.createElement("canvas");t.width=500,t.height=320;var e=t.getContext("2d");return e.drawImage(this.imgList.bg,0,0,500,320),e.save(),e.arc(250,188,43,0,2*Math.PI),e.clip(),e.drawImage(this.imgList.avatar,207,145,86,86),e.restore(),e.fillStyle="white",e.textAlign="center",e.font="bold 32px HelveticaNeue",e.fillText(this.name,250,280),e.font="bold 48px HelveticaNeue",e.fillText(this.score,250,120),t.toDataURL()}};e.exports=i,cc._RF.pop()},{}]},{},["Game","Bong","Image","ItemAsk","ItemChar","ItemResult","PopupAskFriend","AudioManager","Common","Loading","Popup","Rotate","SharePic"]);